"use strict";(self.webpackChunkfhenix_docs=self.webpackChunkfhenix_docs||[]).push([[432],{6596:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>d,contentTitle:()=>o,default:()=>h,frontMatter:()=>s,metadata:()=>c,toc:()=>a});var i=n(5893),r=n(1151);const s={},o="Testing & Interacting",c={id:"tutorial/Advanced/Testing-and-Interacting",title:"Testing & Interacting",description:"Now let's talk a little bit about testing for Fhenix FHE contracts. If you don't care about this and you just want to hack, we recommend at least skimming the Remix Section to understand how to use encryption/decryption APIs.",source:"@site/docs/tutorial/Advanced/Testing-and-Interacting.md",sourceDirName:"tutorial/Advanced",slug:"/tutorial/Advanced/Testing-and-Interacting",permalink:"/fhenix-docs/docs/tutorial/Advanced/Testing-and-Interacting",draft:!1,unlisted:!1,editUrl:"https://github.com/fhenixprotocol/fhenix-docs/main/docs/tutorial/Advanced/Testing-and-Interacting.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Adding a Web Interface",permalink:"/fhenix-docs/docs/tutorial/Advanced/Adding-a-Web-Interface"}},d={},a=[{value:"Manual Testing (Remix)",id:"manual-testing-remix",level:3},{value:"Writing Unit Tests",id:"writing-unit-tests",level:3}];function l(e){const t={a:"a",blockquote:"blockquote",code:"code",em:"em",h1:"h1",h3:"h3",p:"p",pre:"pre",strong:"strong",...(0,r.a)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(t.h1,{id:"testing--interacting",children:"Testing & Interacting"}),"\n",(0,i.jsx)(t.p,{children:"Now let's talk a little bit about testing for Fhenix FHE contracts. If you don't care about this and you just want to hack, we recommend at least skimming the Remix Section to understand how to use encryption/decryption APIs."}),"\n",(0,i.jsx)(t.h3,{id:"manual-testing-remix",children:"Manual Testing (Remix)"}),"\n",(0,i.jsx)(t.p,{children:"Some developers prefer a more manual approach at first - where you just want to quickly verify that something works, play around with a small function or just verify functionality without writing tests or setting up a full developer environment. To do this, we'll show how you can manually test contracts with FHE-encrypted inputs and outputs without using fhevmjs as a helper library."}),"\n",(0,i.jsx)(t.p,{children:"Conveniently, LocalFhenix comes with APIs that perform encryption or decryption for you."}),"\n",(0,i.jsx)(t.p,{children:"The APIs are:"}),"\n",(0,i.jsxs)("table",{children:[(0,i.jsx)("thead",{children:(0,i.jsxs)("tr",{children:[(0,i.jsx)("th",{width:"138",children:"Function"}),(0,i.jsx)("th",{width:"411.3333333333333",children:"Endpoint"}),(0,i.jsx)("th",{children:"Description"}),(0,i.jsx)("th",{"data-hidden":!0,children:"Method"})]})}),(0,i.jsxs)("tbody",{children:[(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:"Encrypt"}),(0,i.jsx)("td",{children:"encrypt?number=integer&int=32/16/8>"}),(0,i.jsx)("td",{children:"Encrypt a number. If int size is not provided defaults to 32."}),(0,i.jsx)("td",{children:"GET"})]}),(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:"Decrypt"}),(0,i.jsx)("td",{children:"decrypt?encrypted=hex string"}),(0,i.jsx)("td",{children:"Decrypt a number."}),(0,i.jsx)("td",{children:"GET"})]}),(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:"Decryption Public"}),(0,i.jsx)("td",{children:"decryption_public"}),(0,i.jsx)("td",{children:"Get the public key that the service uses to decrypt data."}),(0,i.jsx)("td",{})]}),(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:"Network Public Key"}),(0,i.jsx)("td",{children:"public"}),(0,i.jsx)("td",{children:"Get the public key of the network."}),(0,i.jsx)("td",{children:"GET"})]})]})]}),"\n",(0,i.jsx)(t.p,{children:"For example, if I wanted to encrypt the number 259 as a uint16, I would use:"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-bash",children:'curl "http://localhost:5000/encrypt?number=259&int=16"\n'})}),"\n",(0,i.jsxs)(t.p,{children:["To decrypt a number, we use a GET request, with the encrypted string (returned from a ",(0,i.jsx)(t.code,{children:"TFHE.reencrypt"})," function), such as:"]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-bash",children:'curl "http://localhost:5000/decrypt&encrypted=0x0dcc7d99ecbb6fc8b8657321b497b39b2bd6017dd4a159b1d1a801e58149422cb5aa4e2d73994bc15e1dc12604a0da1db0"\n'})}),"\n",(0,i.jsxs)(t.blockquote,{children:["\n",(0,i.jsxs)(t.p,{children:[(0,i.jsx)(t.strong,{children:"Note:"})," At the moment, to perform decryption you must provide the public key of the service for it to be able to decrypt data. That means you need to call the view function of the FHE-enabled contract with the key from the ",(0,i.jsx)(t.em,{children:(0,i.jsx)(t.strong,{children:(0,i.jsx)(t.code,{children:"decryption_public"})})})," endpoint."]}),"\n"]}),"\n",(0,i.jsx)(t.h3,{id:"writing-unit-tests",children:"Writing Unit Tests"}),"\n",(0,i.jsxs)(t.p,{children:["As we mentioned in previous sections, Fhenix uses extensions to the standard EVM to enable FHE functionality. To write unit tests, we use LocalFhenix instead of hardhat network - this is similar to deploying & testing contracts on Ganache. To see an example of how to write unit tests & create CI workflows you can refer to our ",(0,i.jsx)(t.a,{href:"https://github.com/FhenixProtocol/werc20-example",children:"reference wrapped ERC20 contract repo"}),". "]})]})}function h(e={}){const{wrapper:t}={...(0,r.a)(),...e.components};return t?(0,i.jsx)(t,{...e,children:(0,i.jsx)(l,{...e})}):l(e)}},1151:(e,t,n)=>{n.d(t,{Z:()=>c,a:()=>o});var i=n(7294);const r={},s=i.createContext(r);function o(e){const t=i.useContext(s);return i.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function c(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:o(e.components),i.createElement(s.Provider,{value:t},e.children)}}}]);